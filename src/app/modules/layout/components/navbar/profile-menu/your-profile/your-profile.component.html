<div class="px-10 py-10">
  <div>
    <button
      class="absolute left-4 top-5 flex h-10 w-10 items-center justify-center rounded text-muted-foreground/50 transition-all duration-200 focus:outline-none hover:text-muted-foreground"
      (click)="goBack()"
    >
      <svg-icon src="assets/icons/heroicons/solid/chevron-double-left.svg">
      </svg-icon>
    </button>
  </div>
  <div class="px-20 py-14">
    <h1 class="text-3xl font-bold text-foreground">Your Profile</h1>
  </div>
  <div class="flex px-20">
    <!-- <img class="h-52 rounded-2xl" src="assets/images/img-02.jpg" /> -->
    <div class="">
      <div *ngIf="!showForm && !profile">
        <div class="card justify-content-center flex">
          <p-progressSpinner ariaLabel="loading"></p-progressSpinner>
        </div>
      </div>
      <div *ngIf="!editMode && profile">
        <form action="" class="mb-1 font-bold text-foreground">Email</form>
        <h3 class="mb-4 max-w-96 text-foreground">{{ profile.email }}</h3>
        <form action="" class="mb-1 font-bold text-foreground">Name</form>
        <h3 class="mb-4 max-w-96 text-foreground">{{ profile.name }}</h3>
        <form action="" class="mb-1 font-bold text-foreground">Phone</form>
        <h3 class="mb-4 max-w-96 text-foreground">
          {{ profile.phone || "No phone number" }}
        </h3>
        <h3 class="mb-1 font-bold text-foreground">Your Signature</h3>
        <img
          class="mb-5 h-20 w-52 rounded-xl"
          src="{{ profile.signatureUrl }}"
        />
        <p-button
          label="Edit Profile"
          class="rounded-xl text-foreground"
          severity="contrast"
          (click)="toggleEditMode()"
        />
      </div>
      <div *ngIf="editMode && profile">
        <div class="flex flex-col">
          <label for="email" class="font-bold text-foreground">Email</label>
          <input
            pInputText
            [(ngModel)]="profile.email"
            class="mb-4 rounded-xl border-primary bg-background text-foreground ring-primary"
          />
        </div>
        <div class="flex flex-col">
          <label for="name" class="font-bold text-foreground">Name</label>
          <input
            pInputText
            [(ngModel)]="profile.name"
            class="mb-4 rounded-xl border-primary bg-background text-foreground ring-primary"
          />
        </div>
        <div class="flex flex-col">
          <label for="phone" class="font-bold text-foreground">Phone</label>
          <input
            pInputText
            [(ngModel)]="profile.phone"
            class="mb-4 rounded-xl border-primary bg-background text-foreground ring-primary"
          />
        </div>
        <h3 class="mb-1 font-bold text-foreground">Upload Signature</h3>
        <div *ngIf="profile.signatureUrl">
          <img
            class="mb-4 h-20 w-52 rounded-xl"
            src="{{ profile.signatureUrl }}"
            alt="signature"
          />
        </div>
        <div *ngIf="!profile.signatureUrl">
          <h3 class="mb-4 max-w-96 text-foreground">
            No signature, please upload
          </h3>
        </div>
        <!-- <input
          type="file"
          class="mb-4 border-primary bg-background text-foreground ring-primary"
          (change)="onFileSelected($event)"
        />
        <p-button
          label="Upload Signature"
          class="rounded-xl text-foreground"
          severity="contrast"
          (click)="fetchUploadSignature()"
        /> -->
        <p-fileUpload
          mode="basic"
          name="signature"
          chooseIcon="pi pi-upload"
          accept="image/*"
          maxFileSize="1000000"
          (onUpload)="fetchUploadSignature($event)"
          chooseLabel="Browse"
          class="mb-4 border-primary bg-background text-foreground ring-primary"
        ></p-fileUpload>
        <div *ngIf="errorMessage" class="text-foreground">
          {{ errorMessage }}
        </div>
        <div *ngIf="successMessage" class="text-foreground">
          {{ successMessage }}
        </div>
        <div class="mt-2 flex">
          <p-button
            label="Save"
            class="rounded-xl text-foreground"
            [loading]="loading"
            severity="contrast"
            (onClick)="load()"
            (click)="load()"
          />
        </div>
      </div>
    </div>
  </div>
</div>
